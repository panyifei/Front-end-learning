---
layout: default
title: 回溯法
categories:
  - 算法
  - leetcode
  - 回溯法
tags: [回溯法]
---

## 解法

就是写一个函数，将目标值或者一个指针传下去，不断构建结果。<br />如果指针到数组结束或者目标值为 0 就进行结果的判断，成功就推入结果集，否则将上一步推出来。指针下传。<br />可能需要写到 for 循环，如果是全排列的话，如果只是子集的话，不用。

## 做过的回溯法

### 全排列

[全排列](https://leetcode-cn.com/problems/permutations/)(30 分钟)<br />全排列用的递归，写了 30 分钟过关<br />字典法的 4 步搞完之后，需要运行 n 的阶乘次才行，实在是很糟啊，不过也能得到答案，就是每次找比这次大的最小的，然后运行答案次就可以。挺有意思的，但是很难想出来的方法。<br />用回溯法重写了一遍<br />![image.png](https://intranetproxy.alipay.com/skylark/lark/0/2019/png/27385/1566632578887-741eb225-41fb-4704-bbf0-573af85145ca.png#align=left&display=inline&height=103&name=image.png&originHeight=340&originWidth=882&size=95332&status=done&width=267)<br />蠢了，全排列只用保存几个了就行！

### 电话号码的字母组合

[电话号码的字母组合](https://leetcode-cn.com/problems/letter-combinations-of-a-phone-number/)(27 分钟)<br />自己还是用了递归，找 fn 与 fn-1 的关系<br />用了 switch，换成了数组查找来省去一次遍历还是很好使的，自己又忘了<br />这里学习了回溯法

### 括号生成

[括号生成](https://leetcode-cn.com/problems/generate-parentheses/)(53 分钟)<br />用了回溯法，一直超时！！<br />我的回溯法用的很蠢，属于暴力推演，持续优化才过关，其实可以根据题目的特点，不用暴力 for 循环的，特点判断就好了。

### 组合综合

[组合总和](https://leetcode-cn.com/problems/combination-sum/)(20 分钟)<br />回溯法非常合适，可是剪枝的方式需要提前才能速度更快。最主要的是要看清题目，看是否回头匹配决定了是否传 index。

### 组合

[组合](https://leetcode-cn.com/problems/combinations/)(1 个小时)----中等<br />回溯法，方法很简单，但是剪枝剪了半小时，完全不会剪枝啊，但是回溯法补习了一下，就是根据当前的结果以及剩下的选项算再下一步的结果。

这么神奇的写法吗：

```javascript
Array(n)
  .fill()
  .map((_, index) => index + 1);
```

卧槽，看了一个 nice 的答案，只传 index，然后遍历完了之后数据 pop 一下，再继续遍历。大赞！！<br />内存优化到了极限！完全没占用其他的位置。

### 优美的排列

[优美的排列](https://leetcode-cn.com/problems/beautiful-arrangement/)(20 分钟)----中等-----回溯<br />回溯法，这次没需要剪枝，还是很快，但是我写的执行效率太低了。<br />换了解题思路，感觉蛮不错的，要看清楚什么是变量！<br />这一题是可以向回追溯的，所以每次都要全部遍历，然后用一个数组标记谁被遍历过了即可。

### 子集

[子集](https://leetcode-cn.com/problems/subsets/)(15 分钟)-----中等-----回溯<br />回溯法，用的组合那把的回溯法<br />![image.png](https://intranetproxy.alipay.com/skylark/lark/0/2019/png/27385/1562728974934-3ea6d987-8ee7-428d-be8f-fef803111aa6.png#align=left&display=inline&height=70&name=image.png&originHeight=206&originWidth=914&size=90530&status=done&width=310)<br />优秀答案，哈哈

### 组合总和 II

[组合总和 II](https://leetcode-cn.com/problems/combination-sum-ii/)(20 分钟)----中等-----回溯<br />其实 10 分钟差不多就写出来了，一直在想为什么会出问题，结果只是重复了而已，气死我了<br />这种回溯法我感觉我差不多了，执行效率也差不多<br />![image.png](https://intranetproxy.alipay.com/skylark/lark/0/2019/png/27385/1562731029399-07f38ff0-38d2-445f-90fd-31b5fa696826.png#align=left&display=inline&height=99&name=image.png&originHeight=214&originWidth=894&size=95102&status=done&width=413)

### 复原 IP 地址

[复原 IP 地址](https://leetcode-cn.com/problems/restore-ip-addresses/)(25 分钟)----中等-----回溯<br />写花了 10 分钟，调试花了很久，随便剪个枝就很容易了<br />![image.png](https://intranetproxy.alipay.com/skylark/lark/0/2019/png/27385/1562779838841-259da2d6-e4c4-4ae4-a8dc-c36a0b4280e4.png#align=left&display=inline&height=132&name=image.png&originHeight=406&originWidth=1010&size=111426&status=done&width=328)

### 分割回文串

[分割回文串](https://leetcode-cn.com/problems/palindrome-partitioning/)(15 分钟)----中等-----回溯<br />回文串有点意思，即使前面校验失败了，后面也能的<br />![image.png](https://intranetproxy.alipay.com/skylark/lark/0/2019/png/27385/1562811834696-c8fffe48-4ff5-41b0-9368-5e890e5d49bb.png#align=left&display=inline&height=102&name=image.png&originHeight=384&originWidth=892&size=117539&status=done&width=238)<br />优化个两分钟，效率提高了不少<br />把回文重写了下，从数组 reverse 改成了 while 判断，更快了。

### 子集 II

[子集 II](https://leetcode-cn.com/problems/subsets-ii/)（20 分钟）----中等-----回溯<br />子集的话就是直接添加，不需要判断，不难<br />![image.png](https://intranetproxy.alipay.com/skylark/lark/0/2019/png/27385/1562826073197-9935aa94-bb2f-40c3-abec-769dfa26b263.png#align=left&display=inline&height=99&name=image.png&originHeight=256&originWidth=896&size=93584&status=done&width=348)

### 字母大小写全排列

[字母大小写全排列](https://leetcode-cn.com/problems/letter-case-permutation/)（15 分钟）----简单-----回溯<br />这个全排列需要一直 push，所以也需要一直 pop，还是有点小难的<br />![image.png](https://intranetproxy.alipay.com/skylark/lark/0/2019/png/27385/1562833683348-57b1becb-750f-4542-a2e9-a6f6677ff4f8.png#align=left&display=inline&height=125&name=image.png&originHeight=344&originWidth=934&size=106622&status=done&width=340)

### 全排列 II

[全排列 II](https://leetcode-cn.com/problems/permutations-ii/)(50 分钟)----中等----回溯法<br />没想到回溯法也要写 forEach，因为要完全回头，所以要 forEach<br />通过先排序，再相同跳过的方式可以剪枝<br />![image.png](https://intranetproxy.alipay.com/skylark/lark/0/2019/png/27385/1562914161736-52e0f0ca-0294-434f-9043-19d5c838e506.png#align=left&display=inline&height=124&name=image.png&originHeight=366&originWidth=936&size=122950&status=done&width=318)

### 第 k 个排列

[第 k 个排列](https://leetcode-cn.com/problems/permutation-sequence/)(12 分钟)----中等----回溯法<br />全排列一样的回溯法，但是效率较低<br />![image.png](https://intranetproxy.alipay.com/skylark/lark/0/2019/png/27385/1562932029768-808fbbf0-148e-4104-b0e5-afc4cff9522f.png#align=left&display=inline&height=133&name=image.png&originHeight=324&originWidth=848&size=96953&status=done&width=348)<br />换了思路，不再遍历，直接根据值算出来<br />![image.png](https://intranetproxy.alipay.com/skylark/lark/0/2019/png/27385/1563019415698-27b6bd99-8f37-4566-8183-ca28e5e8b889.png#align=left&display=inline&height=125&name=image.png&originHeight=332&originWidth=918&size=48881&status=done&width=346)

### 单词搜索

[单词搜索](https://leetcode-cn.com/problems/word-search/)(40 分钟)---中等---回溯<br />写的太糟了，数组操作很耗时，尽量别用，<br />思路是对的，没啥问题<br />![image.png](https://intranetproxy.alipay.com/skylark/lark/0/2019/png/27385/1563173573161-3642dd5e-0ff9-45fb-8e2c-5f7ebb80407c.png#align=left&display=inline&height=98&name=image.png&originHeight=340&originWidth=866&size=113686&status=done&width=250)
