## https 连接过程

客户端访问 url，要求建立 ssl 链接
服务器返回公钥以及证书
客户端鉴别证书的颁发机构以及过期时间，随机生成秘钥，根据公钥加密然后传给服务器端
服务器根据自己的私钥解析得到秘钥，然后用秘钥加密内容
两段用秘钥加密传输

## 如何判断证书合法性

浏览器内置了信任的根证书，会看证书是否是信任的机构颁布的
比对看证书是否在有效期内
校验对方是否存在证书私钥

## 中间人攻击

客户端访问 url，要求建立 ssl 链接
服务器返回公钥以及证书
中间人截获公钥，然后传假的给客户端
客户端随机的秘钥用假公钥加密返回
中间人用私钥解密得到秘钥
然后中间人可以既和和服务器端交互，又和客户端交互

防范措施：
让服务器端将公钥以及 CA 证书返回，浏览器可以识别 CA 证书的真假
